<root>
  <behavior type="parallel">
    <behavior type="aimToPlayer" />
    
    <behavior type="sequence">
      <behavior type="fire"/>
      <behavior type="wait" fTime="1.0" fRandomDeviation="0.2" />
    </behavior>
    
    <behavior type="selector">
      <behavior type="parallel">
        
        <behavior type="IsAtPosition" sPosition="player" fRadius="200.0" bNegate="true" />
        
        <!--No esta suficiente cerca del player como para huir-->
        <behavior type="selector">
          <!-- Demasiado lejos del player, se acerca-->
          <behavior type="sequence">
            <behavior type="IsAtPosition" sPosition="player" fRadius="350.0" bNegate="true" />
            <behavior type="goToBlackboardPosition" sTo="player" fArriveDistance="300.0" bKeepUpdatingPosition="true" />
          </behavior>
          
          <!-- Distancia optima, espera-->
          <behavior type="wait" fTime="0.2" fRandomDeviation="0.1" />
        </behavior>
      </behavior>
      
      <!--Demasiado cerca del player, huye-->
      <behavior type="parallel">
        <behavior type="IsAtPosition" sPosition="player" fRadius="300.0" />
        <behavior type="sequence">
          <behavior type="CalculateFleePosition" sFrom="player" sResult="fleePos" fDistance="300.0" />
          <behavior type="goToBlackboardPosition" sTo="fleePos" fArriveDistance="20.0" />
          <behavior type="wait" fTime="0.2" fRandomDeviation="0.1" />
        </behavior>
      </behavior> 
    </behavior><!--Selector-->
  </behavior><!--Parallel-->
 </root>